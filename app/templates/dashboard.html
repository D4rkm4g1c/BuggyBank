{% extends "base.html" %}

{% block title %}Dashboard - BuggyBank{% endblock %}

{% block content %}
<div class="card">
    <h1>Dashboard</h1>
    <p>Welcome, {{ user[1] }}!</p>
    
    <div style="display: flex; gap: 2rem;">
        <div>
            <h3>Account Information</h3>
            <p><strong>Username:</strong> {{ user[1] }}</p>
            <p><strong>Email:</strong> {{ user[3] }}</p>
            <p><strong>Balance:</strong> ${{ "%.2f"|format(user[4]) }}</p>
            <p><strong>Bio:</strong> {{ user[5] or 'No bio set' }}</p>
        </div>
        
        <div>
            <h3>Quick Actions</h3>
            <a href="{{ url_for('transfer') }}" class="btn">Transfer Funds</a><br><br>
            <a href="{{ url_for('profile') }}" class="btn">Edit Profile</a><br><br>
            <a href="{{ url_for('support_messages') }}" class="btn">Contact Support</a>
        </div>
    </div>
</div>

<div class="card">
    <h2>Recent Transactions</h2>
    {% if transactions %}
        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Message</th>
                </tr>
            </thead>
            <tbody>
                {% for transaction in transactions[:5] %}
                <tr>
                    <td>{{ transaction[5] }}</td>
                    <td>
                        {% if transaction[1] == user[0] %}
                            Sent
                        {% else %}
                            Received
                        {% endif %}
                    </td>
                    <td>${{ "%.2f"|format(transaction[3]) }}</td>
                    <td>{{ transaction[4] or 'No message' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <a href="{{ url_for('transaction_history') }}" class="btn">View All Transactions</a>
    {% else %}
        <p>No transactions yet.</p>
    {% endif %}
</div>
{% endblock %} 